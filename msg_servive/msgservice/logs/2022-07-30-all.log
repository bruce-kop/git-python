Sat, 30 Jul 2022 00:05:54-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:05:54-root-message.py-[line:245]-INFO-[日志信息]: []
Sat, 30 Jul 2022 00:11:16-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:11:16-root-message.py-[line:247]-DEBUG-[日志信息]: The field 'from_u' must be an accumulator object, full error: {'ok': 0.0, 'errmsg': "The field 'from_u' must be an accumulator object", 'code': 40234, 'codeName': 'Location40234'}
Sat, 30 Jul 2022 00:16:42-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:16:42-root-message.py-[line:243]-INFO-[日志信息]: <pymongo.command_cursor.CommandCursor object at 0x00000197F8BECB20>
Sat, 30 Jul 2022 00:16:42-root-message.py-[line:245]-INFO-[日志信息]: [{'_id': 'from_u', 'num_chat': 49}]
Sat, 30 Jul 2022 00:17:09-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:17:09-root-message.py-[line:243]-INFO-[日志信息]: <pymongo.command_cursor.CommandCursor object at 0x0000022D43AB52A0>
Sat, 30 Jul 2022 00:17:09-root-message.py-[line:245]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'num_chat': 25}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'num_chat': 24}]
Sat, 30 Jul 2022 00:19:37-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:19:37-root-message.py-[line:243]-INFO-[日志信息]: <pymongo.command_cursor.CommandCursor object at 0x000002102C3D9030>
Sat, 30 Jul 2022 00:19:37-root-message.py-[line:245]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'first_msg': '你好'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'first_msg': '你好啊'}]
Sat, 30 Jul 2022 00:22:47-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:22:47-root-message.py-[line:243]-INFO-[日志信息]: <pymongo.command_cursor.CommandCursor object at 0x000002751C159240>
Sat, 30 Jul 2022 00:22:47-root-message.py-[line:245]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'first_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'first_msg': 'bye'}]
Sat, 30 Jul 2022 00:23:45-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:23:45-root-message.py-[line:243]-INFO-[日志信息]: <pymongo.command_cursor.CommandCursor object at 0x000002751C1592A0>
Sat, 30 Jul 2022 00:23:45-root-message.py-[line:245]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'first_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'first_msg': 'bye'}]
Sat, 30 Jul 2022 00:23:50-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:23:50-root-message.py-[line:243]-INFO-[日志信息]: <pymongo.command_cursor.CommandCursor object at 0x0000023E1C06CE20>
Sat, 30 Jul 2022 00:23:50-root-message.py-[line:245]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'created_at': 'created_at', 'first_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'created_at': 'created_at', 'first_msg': 'bye'}]
Sat, 30 Jul 2022 00:24:03-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:24:03-root-message.py-[line:243]-INFO-[日志信息]: <pymongo.command_cursor.CommandCursor object at 0x0000026F40EF9030>
Sat, 30 Jul 2022 00:24:03-root-message.py-[line:245]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'first_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'first_msg': 'bye'}]
Sat, 30 Jul 2022 00:27:36-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:27:36-root-message.py-[line:243]-INFO-[日志信息]: <pymongo.command_cursor.CommandCursor object at 0x000001C4DE98CDC0>
Sat, 30 Jul 2022 00:27:36-root-message.py-[line:245]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}]
Sat, 30 Jul 2022 00:28:19-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:28:19-app-app.py-[line:1449]-ERROR-[日志信息]: Exception on /api/msg/find_chats [POST]
Traceback (most recent call last):
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1519, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1517, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1503, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\git-python\msg_servive\msgservice\views\message.py", line 252, in find_chats
    return jsonify(responseBuilder.build_response(ResCode.MESSAGE_FIND_SUCCESS.value,
  File "D:\Programs\Python\Python310\lib\site-packages\flask\json\__init__.py", line 302, in jsonify
    f"{dumps(data, indent=indent, separators=separators)}\n",
  File "D:\Programs\Python\Python310\lib\site-packages\flask\json\__init__.py", line 132, in dumps
    return _json.dumps(obj, **kwargs)
  File "D:\Programs\Python\Python310\lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "D:\Programs\Python\Python310\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python310\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python310\lib\site-packages\flask_mongoengine\json.py", line 19, in default
    return superclass.default(self, obj)
  File "D:\Programs\Python\Python310\lib\site-packages\flask\json\__init__.py", line 51, in default
    return super().default(o)
  File "D:\Programs\Python\Python310\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type CommandCursor is not JSON serializable
Sat, 30 Jul 2022 00:31:13-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:31:55-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:31:55-root-message.py-[line:253]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}]
Sat, 30 Jul 2022 00:32:12-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:32:12-root-message.py-[line:253]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}]
Sat, 30 Jul 2022 00:33:41-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:33:41-root-message.py-[line:253]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}]
Sat, 30 Jul 2022 00:33:48-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:33:48-root-message.py-[line:253]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}]
Sat, 30 Jul 2022 00:33:48-root-message.py-[line:258]-INFO-[日志信息]: {'code': 3000, 'msg': 'message find success.', 'data': {'chat_session': [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}], 'totalCount': 10, 'totalpage': 2, 'pageIndex': 1, 'pageSize': 5}}
Sat, 30 Jul 2022 00:34:31-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:34:31-root-message.py-[line:253]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}]
Sat, 30 Jul 2022 00:34:31-root-message.py-[line:258]-INFO-[日志信息]: {'code': 3000, 'msg': 'message find success.', 'data': {'chat_session': [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}], 'totalCount': 10, 'totalpage': 2, 'pageIndex': 1, 'pageSize': 5}}
Sat, 30 Jul 2022 00:36:04-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:36:04-root-message.py-[line:253]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}]
Sat, 30 Jul 2022 00:36:04-root-message.py-[line:258]-INFO-[日志信息]: {'code': 3000, 'msg': 'message find success.', 'data': {'chat_session': [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}], 'totalCount': 10, 'totalpage': 2, 'pageIndex': 1, 'pageSize': 5}}
Sat, 30 Jul 2022 00:36:12-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:36:12-root-message.py-[line:246]-DEBUG-[日志信息]: 'CommandCursor' object has no attribute 'paginate'
Sat, 30 Jul 2022 00:37:59-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:37:59-root-message.py-[line:246]-DEBUG-[日志信息]: The field 'from_u' must be an accumulator object, full error: {'ok': 0.0, 'errmsg': "The field 'from_u' must be an accumulator object", 'code': 40234, 'codeName': 'Location40234'}
Sat, 30 Jul 2022 00:39:09-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:39:09-app-app.py-[line:1449]-ERROR-[日志信息]: Exception on /api/msg/find_chats [POST]
Traceback (most recent call last):
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1519, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1517, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1503, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\git-python\msg_servive\msgservice\views\message.py", line 249, in find_chats
    totalCount = chats.total
AttributeError: 'CommandCursor' object has no attribute 'total'
Sat, 30 Jul 2022 00:39:21-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:39:21-app-app.py-[line:1449]-ERROR-[日志信息]: Exception on /api/msg/find_chats [POST]
Traceback (most recent call last):
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1519, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1517, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1503, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\git-python\msg_servive\msgservice\views\message.py", line 249, in find_chats
    totalCount = chats.total
AttributeError: 'CommandCursor' object has no attribute 'total'
Sat, 30 Jul 2022 00:39:48-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:39:48-root-message.py-[line:249]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}]
Sat, 30 Jul 2022 00:39:48-app-app.py-[line:1449]-ERROR-[日志信息]: Exception on /api/msg/find_chats [POST]
Traceback (most recent call last):
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1519, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1517, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1503, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\git-python\msg_servive\msgservice\views\message.py", line 252, in find_chats
    totalCount=totalCount, totalpage=totalpage,
NameError: name 'totalCount' is not defined
Sat, 30 Jul 2022 00:39:56-root-app.py-[line:44]-INFO-[日志信息]: /api/msg/find_chats
Sat, 30 Jul 2022 00:39:56-root-message.py-[line:249]-INFO-[日志信息]: [{'_id': 'ba0b7df0-a7ca-4a31-93d6-e0bcefc41ddc', 'groupid': '42177ae4-81bf-4bc8-8fc5-74a025cd154f', 'created_at': datetime.datetime(2022, 7, 29, 20, 1, 54, 310000), 'last_msg': '你好啊啊 啊啊 a、'}, {'_id': 'f692b513-8e1c-410a-927b-58687b85dcc8', 'groupid': '', 'created_at': datetime.datetime(2022, 7, 29, 17, 16, 16, 605000), 'last_msg': 'bye'}]
Sat, 30 Jul 2022 00:39:56-app-app.py-[line:1449]-ERROR-[日志信息]: Exception on /api/msg/find_chats [POST]
Traceback (most recent call last):
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1519, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1517, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\Programs\Python\Python310\lib\site-packages\flask\app.py", line 1503, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "D:\git-python\msg_servive\msgservice\views\message.py", line 252, in find_chats
    totalCount=totalCount, totalpage=totalpage,
NameError: name 'totalCount' is not defined
